<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Ariyana</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Sacramento&display=swap');

        :root {
            --bg: #fff0f3;
            --pink: #ff8fa3;
            --mint: #caffbf;
            --lilac: #bdb2ff;
            --peach: #ffc6ff;
            --text: #595066;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: var(--bg);
            font-family: 'Quicksand', sans-serif;
            color: var(--text);
            cursor: none; /* Hide default cursor */
        }

        /* --- MAGIC CURSOR --- */
        .cursor-dot {
            width: 12px;
            height: 12px;
            background: var(--pink);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
        }

        .star-trail {
            position: fixed;
            pointer-events: none;
            color: var(--lilac);
            font-size: 10px;
            z-index: 9998;
            opacity: 0;
        }

        /* --- PARTICLES (EXPLOSIONS) --- */
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
        }

        /* --- RAIN HEARTS --- */
        .rain-heart {
            position: fixed;
            top: -20px;
            font-size: 20px;
            color: var(--pink);
            z-index: 50;
            pointer-events: none;
        }

        /* --- LAYOUT --- */
        .page {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
        }

        .page.active { opacity: 1; pointer-events: all; z-index: 10; }

        h1 {
            font-family: 'Sacramento', cursive;
            font-size: 4rem;
            color: var(--pink);
            margin: 0;
            text-shadow: 2px 2px 0px rgba(255, 198, 255, 0.5);
        }

        .instruction {
            position: absolute; bottom: 50px; font-size: 0.9rem;
            opacity: 0.6; letter-spacing: 3px; text-transform: uppercase;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }

        /* --- PAGE 1: BUBBLES --- */
        .bubble {
            position: absolute;
            border-radius: 50%;
            background: rgba(189, 178, 255, 0.6);
            backdrop-filter: blur(2px);
            border: 2px solid rgba(255,255,255,0.5);
            cursor: pointer;
            display: flex; justify-content: center; align-items: center;
            color: white; font-weight: bold;
            box-shadow: inset 0 0 20px rgba(255,255,255,0.5);
        }
        
        #enter-btn {
            padding: 15px 50px;
            background: var(--pink); color: white; border: none; border-radius: 30px;
            font-size: 1.5rem; font-family: 'Sacramento', cursive;
            cursor: pointer; display: none; 
            box-shadow: 0 10px 20px rgba(255, 143, 163, 0.3);
            transition: transform 0.2s;
        }
        #enter-btn:hover { transform: scale(1.1) rotate(-2deg); }

        /* --- PAGE 2: FLOWERS --- */
        .garden-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; }
        .flower {
            width: 80px; height: 80px; background: #eee; border-radius: 50%;
            cursor: pointer; position: relative; transition: 0.5s;
        }
        .flower::after {
            content: 'ðŸŒ¸'; font-size: 0px; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%); transition: 0.5s;
        }
        .flower.bloomed { background: var(--mint); transform: scale(1.1); box-shadow: 0 0 15px var(--mint); }
        .flower.bloomed::after { font-size: 45px; }

        /* --- PAGE 3: LOCK --- */
        .lock-container { width: 300px; height: 300px; position: relative; perspective: 1000px; }
        
        .target-heart {
            width: 140px; height: 140px; background: var(--pink);
            position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%);
            clip-path: path("M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.57 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181");
            transform: scale(4.5) translate(-12px, -12px); 
            opacity: 0.3; transition: opacity 0.3s;
        }

        .draggable-key {
            width: 80px; height: 80px; background: var(--lilac); border-radius: 50%;
            position: absolute; bottom: 0; left: 20px; cursor: grab;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; box-shadow: 0 5px 20px rgba(189, 178, 255, 0.6); z-index: 5;
        }

        /* --- PAGE 4: LETTER --- */
        .letter-paper {
            background: white; padding: 50px; width: 80%; max-width: 500px;
            border-radius: 10px; box-shadow: 0 20px 60px rgba(255, 143, 163, 0.2);
            opacity: 0; transform: translateY(50px);
            /* 3D Tilt Setup */
            transform-style: preserve-3d;
            transition: transform 0.1s ease;
        }
    </style>
</head>
<body>

    <div class="cursor-dot" id="cursor"></div>

    <div style="position:fixed; top:20px; right:20px; display:flex; gap:10px; z-index:900;">
        <div class="dot active" style="width:8px; height:8px; border-radius:50%; background:#ddd;"></div>
        <div class="dot" style="width:8px; height:8px; border-radius:50%; background:#ddd;"></div>
        <div class="dot" style="width:8px; height:8px; border-radius:50%; background:#ddd;"></div>
        <div class="dot" style="width:8px; height:8px; border-radius:50%; background:#ddd;"></div>
    </div>

    <div class="page active" id="page1">
        <h1>Hey Ariyana</h1>
        <p style="margin-top:20px; opacity:0.8;">Pop the obstacles to begin</p>
        <div class="instruction">Click the bubbles</div>
        <button id="enter-btn" onclick="nextPage(2)">Enter Our World</button>
    </div>

    <div class="page" id="page2">
        <h1>Our Garden</h1>
        <div class="instruction">Hover to bloom memories</div>
        <div class="garden-grid" id="garden"></div>
    </div>

    <div class="page" id="page3">
        <h1>The Collision</h1>
        <div class="instruction">Drag May 5th to July 4th</div>
        
        <div class="lock-container" id="lockTilt">
            <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events:none;">
                <div style="color:var(--pink); font-weight:bold; margin-bottom:5px;">Ariyana</div>
                <div style="color:var(--pink); font-size:24px; font-weight:bold;">04 JULY</div>
            </div>
            
            <svg class="target-heart" viewBox="0 0 24 24" fill="var(--pink)">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
            
            <div class="draggable-key" id="key">
                <span style="font-size:10px; opacity:0.9;">Prantik</span>
                <span style="font-weight:bold;">05 MAY</span>
            </div>
        </div>
    </div>

    <div class="page" id="page4">
        <div class="letter-paper" id="letter">
            <h1 style="font-size: 2rem; margin-bottom: 20px; font-family:'Quicksand'; text-align:left;">My Dearest,</h1>
            <p id="typewriter-text" style="line-height:1.8; font-size:1.1rem;"></p>
            <p style="text-align: right; margin-top: 30px; font-weight: bold; color: var(--pink);">- Cutiee</p>
        </div>
    </div>

    <script>
        gsap.registerPlugin(Draggable);

        // --- 1. MAGIC CURSOR ---
        const cursor = document.getElementById('cursor');
        let mouseX = 0, mouseY = 0;
        
        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
            
            // Move main cursor dot
            gsap.to(cursor, {x: mouseX, y: mouseY, duration: 0.1});
            
            // Create "Fairy Dust"
            if(Math.random() > 0.5) createStarTrail(mouseX, mouseY);
        });

        function createStarTrail(x, y) {
            const star = document.createElement('div');
            star.classList.add('star-trail');
            star.innerHTML = 'âœ¦'; // Star character
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            star.style.color = ['#ff8fa3', '#caffbf', '#bdb2ff', '#ffc6ff'][Math.floor(Math.random()*4)];
            document.body.appendChild(star);
            
            gsap.to(star, {
                y: y + 20,
                opacity: 1,
                duration: 0.2,
                onComplete: () => {
                    gsap.to(star, {
                        y: y + 40,
                        opacity: 0,
                        duration: 0.5,
                        onComplete: () => star.remove()
                    })
                }
            });
        }

        // --- 2. PARTICLE EXPLOSION UTILITY ---
        function explode(x, y, color) {
            for (let i = 0; i < 12; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.backgroundColor = color;
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                document.body.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 80 + 20;
                
                gsap.to(p, {
                    x: Math.cos(angle) * velocity,
                    y: Math.sin(angle) * velocity,
                    opacity: 0,
                    scale: 0,
                    duration: 1,
                    ease: "power2.out",
                    onComplete: () => p.remove()
                });
            }
        }

        // --- 3. PAGE LOGIC ---
        function nextPage(num) {
            gsap.to(".page.active", { opacity: 0, scale: 0.9, duration: 0.5, onComplete: () => {
                document.querySelector(".page.active").classList.remove("active");
                const next = document.getElementById(`page${num}`);
                next.classList.add("active");
                gsap.fromTo(next, { opacity: 0, scale: 1.1 }, { opacity: 1, scale: 1, duration: 0.5 });
                
                // Update dots
                const dots = document.querySelectorAll(".dot");
                dots.forEach(d => d.style.background = "#ddd");
                dots[num-1].style.background = "#ff8fa3";

                if(num === 2) initPage2();
                if(num === 3) initPage3();
                if(num === 4) initPage4();
            }});
        }

        // PAGE 1: BUBBLES
        const page1 = document.getElementById('page1');
        let popped = 0;
        for(let i=0; i<8; i++) {
            const b = document.createElement('div');
            b.classList.add('bubble');
            const size = Math.random() * 50 + 60;
            b.style.width = size + 'px'; b.style.height = size + 'px';
            b.style.left = Math.random() * 80 + 10 + '%';
            b.style.top = Math.random() * 60 + 20 + '%';
            
            // Random float animation
            gsap.to(b, {
                y: -30, x: Math.random()*20 - 10,
                duration: Math.random() * 2 + 2,
                yoyo: true, repeat: -1, ease: "sine.inOut"
            });

            b.onmouseenter = () => {
                 // Subtle repulsion
                 gsap.to(b, { scale: 1.1, duration: 0.2 });
            };

            b.onclick = (e) => {
                // EXPLOSION!
                explode(e.clientX, e.clientY, "#bdb2ff");
                b.remove();
                popped++;
                if(popped === 8) {
                    const btn = document.getElementById('enter-btn');
                    btn.style.display = "block";
                    gsap.from(btn, {scale:0, ease:"elastic.out(1,0.5)", duration:1});
                }
            };
            page1.appendChild(b);
        }

        // PAGE 2: FLOWERS
        function initPage2() {
            const garden = document.getElementById('garden');
            if(garden.children.length > 0) return;

            let bloomed = 0;
            for(let i=0; i<9; i++) {
                const f = document.createElement('div');
                f.classList.add('flower');
                f.onmouseenter = (e) => {
                    if(!f.classList.contains('bloomed')) {
                        f.classList.add('bloomed');
                        // Pollen Explosion
                        const rect = f.getBoundingClientRect();
                        explode(rect.left + 40, rect.top + 40, "#caffbf");
                        bloomed++;
                        if(bloomed === 9) setTimeout(() => nextPage(3), 800);
                    }
                };
                garden.appendChild(f);
            }
        }

        // PAGE 3: LOCK & KEY
        function initPage3() {
            // Add 3D Tilt Effect
            const container = document.getElementById('lockTilt');
            document.addEventListener('mousemove', (e) => {
                if(!document.getElementById('page3').classList.contains('active')) return;
                const xAxis = (window.innerWidth / 2 - e.pageX) / 20;
                const yAxis = (window.innerHeight / 2 - e.pageY) / 20;
                container.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
            });

            Draggable.create("#key", {
                type: "x,y",
                bounds: ".lock-container",
                onDragEnd: function() {
                    if (this.hitTest(".target-heart", "50%")) {
                        gsap.to(this.target, {scale:0, duration:0.3});
                        gsap.to(".target-heart", {
                            scale: 20, opacity:1, duration:1.5, ease:"power2.inOut",
                            onComplete: () => nextPage(4)
                        });
                        explode(window.innerWidth/2, window.innerHeight/2, "#ff8fa3");
                    } else {
                        gsap.to(this.target, {x:0, y:0, duration:0.5, ease:"elastic.out(1,0.5)"});
                    }
                }
            });
        }

        // PAGE 4: LETTER
        function initPage4() {
            // 3D Tilt for Letter
            const letter = document.getElementById('letter');
            document.addEventListener('mousemove', (e) => {
                 if(!document.getElementById('page4').classList.contains('active')) return;
                 const xAxis = (window.innerWidth / 2 - e.pageX) / 40;
                 const yAxis = (window.innerHeight / 2 - e.pageY) / 40;
                 letter.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
            });

            gsap.to(letter, { y: 0, opacity: 1, duration: 1, ease:"back.out(1.7)" });
            
            const msg = "July 4th, 2024.\n\nMost people look at the sky for fireworks that day. I just look at you.\n\nFrom my birthday (May 5th) to yours, the calendar finally makes sense.\n\nYou are my favorite celebration.\n\nI love you.";
            const target = document.getElementById('typewriter-text');
            target.innerHTML = "";
            let i = 0;
            
            function type() {
                if (i < msg.length) {
                    target.innerHTML += (msg.charAt(i) === "\n") ? "<br>" : msg.charAt(i);
                    i++;
                    setTimeout(type, 40);
                } else {
                    // Start Heart Rain
                    startHeartRain();
                }
            }
            setTimeout(type, 1000);
        }

        // --- 4. HEART RAIN FINALE ---
        function startHeartRain() {
            setInterval(() => {
                const h = document.createElement('div');
                h.classList.add('rain-heart');
                h.innerHTML = 'â¤';
                h.style.left = Math.random() * 100 + '%';
                h.style.fontSize = Math.random() * 20 + 10 + 'px';
                h.style.opacity = Math.random();
                document.body.appendChild(h);

                gsap.to(h, {
                    y: window.innerHeight + 50,
                    rotation: Math.random() * 360,
                    duration: Math.random() * 2 + 3,
                    ease: "linear",
                    onComplete: () => h.remove()
                });
            }, 100);
        }

    </script>
</body>
</html>
