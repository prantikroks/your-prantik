<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Ariyana</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Draggable.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&family=Sacramento&display=swap');

        :root {
            --bg: #fff0f3;
            --pink: #ff8fa3;
            --mint: #caffbf;
            --lilac: #bdb2ff;
            --text: #595066;
        }

        body {
            margin: 0;
            overflow: hidden;
            background-color: var(--bg);
            font-family: 'Quicksand', sans-serif;
            color: var(--text);
            touch-action: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* --- MOBILE LAYOUT --- */
        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s ease;
            padding: 20px; box-sizing: border-box;
        }
        .page.active { opacity: 1; pointer-events: all; z-index: 10; }

        h1 {
            font-family: 'Sacramento', cursive;
            font-size: 15vw;
            color: var(--pink);
            margin: 0;
            text-align: center;
            text-shadow: 2px 2px 0px rgba(255, 198, 255, 0.5);
        }

        .instruction {
            position: absolute; bottom: 12%; 
            font-size: 0.9rem; opacity: 0.6; 
            letter-spacing: 2px; text-transform: uppercase;
            animation: float 2s ease-in-out infinite;
            text-align: center;
            width: 100%;
        }

        @keyframes float { 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }

        /* --- PARTICLES --- */
        .particle {
            position: absolute; width: 6px; height: 6px; border-radius: 50%;
            pointer-events: none; z-index: 100;
        }

        /* --- PAGE 1: BUBBLES --- */
        .bubble {
            position: absolute; border-radius: 50%;
            background: rgba(189, 178, 255, 0.6);
            backdrop-filter: blur(2px); border: 2px solid rgba(255,255,255,0.8);
            display: flex; justify-content: center; align-items: center;
        }
        
        #enter-btn {
            padding: 15px 40px; background: var(--pink); color: white;
            border: none; border-radius: 50px; font-size: 1.2rem;
            font-family: 'Sacramento', cursive; cursor: pointer; display: none; 
            box-shadow: 0 10px 20px rgba(255, 143, 163, 0.4);
            z-index: 20;
        }

        /* --- PAGE 2: FLOWERS --- */
        .garden-grid { 
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; 
            touch-action: none; 
        }
        .flower {
            width: 18vw; height: 18vw;
            max-width: 80px; max-height: 80px;
            background: #eee; border-radius: 50%;
            position: relative; transition: 0.3s;
        }
        .flower::after {
            content: 'üå∏'; font-size: 0px; position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%); transition: 0.3s;
        }
        .flower.bloomed { background: var(--mint); transform: scale(1.1); box-shadow: 0 0 15px var(--mint); }
        .flower.bloomed::after { font-size: 8vw; }

        /* --- PAGE 3: LOCK --- */
        .lock-container { 
            width: 80vw; height: 80vw; max-width: 300px; max-height: 300px;
            position: relative; 
        }
        
        .target-heart {
            width: 100px; height: 100px; background: var(--pink);
            position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%);
            clip-path: path("M12 21.593c-5.63-5.539-11-10.297-11-14.402 0-3.791 3.068-5.191 5.281-5.191 1.312 0 4.151.501 5.719 4.457 1.59-3.968 4.464-4.447 5.726-4.447 2.54 0 5.274 1.621 5.274 5.181 0 4.069-5.136 8.625-11 14.402m5.726-20.583c-2.203 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248-3.183 0-6.281 2.187-6.281 6.191 0 4.661 5.57 9.429 12 15.809 6.43-6.38 12-11.148 12-15.809 0-4.011-3.095-6.181-6.274-6.181");
            transform: scale(3.5) translate(-12px, -12px); 
            opacity: 0.3; transition: opacity 0.3s;
        }

        .draggable-key {
            width: 60px; height: 60px; background: var(--lilac); border-radius: 50%;
            position: absolute; bottom: 0; left: 10%; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: white; box-shadow: 0 5px 20px rgba(189, 178, 255, 0.6); z-index: 5;
            touch-action: none;
        }

        /* --- PAGE 4: LETTER (SCROLLABLE FOR LONG TEXT) --- */
        .letter-paper {
            background: white; padding: 25px; width: 85%;
            max-height: 70vh; /* Allow scrolling if text is long */
            overflow-y: auto;
            border-radius: 10px; box-shadow: 0 20px 60px rgba(255, 143, 163, 0.2);
            opacity: 0; transform: translateY(50px);
        }

        /* RAIN */
        .rain-heart {
            position: fixed; top: -20px; color: var(--pink); z-index: 50; pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="page active" id="page1">
        <h1>Hey Ariyana</h1>
        <p style="margin-top:20px; opacity:0.8;">Tap the bubbles!</p>
        <div class="instruction">Clearing path...</div>
        <button id="enter-btn" onclick="nextPage(2)">Enter</button>
    </div>

    <div class="page" id="page2">
        <h1>Bloom</h1>
        <div class="instruction">Slide finger over flowers</div>
        <div class="garden-grid" id="garden"></div>
    </div>

    <div class="page" id="page3">
        <h1>Connect Us</h1>
        <div class="instruction">Drag May to July</div>
        
        <div class="lock-container">
            <div style="position: absolute; top: 30%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events:none; width: 100%;">
                <div style="color:var(--pink); font-weight:bold; font-size: 0.9rem;">Ariyana</div>
                <div style="color:var(--pink); font-size:1.5rem; font-weight:bold;">04 JULY</div>
            </div>
            
            <svg class="target-heart" viewBox="0 0 24 24" fill="var(--pink)">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
            
            <div class="draggable-key" id="key">
                <span style="font-size:0.7rem; opacity:0.9;">Prantik</span>
                <span style="font-weight:bold; font-size: 0.8rem;">05 MAY</span>
            </div>
        </div>
    </div>

    <div class="page" id="page4">
        <div class="letter-paper" id="letter">
            <h1 style="font-size: 1.5rem; margin-bottom: 20px; font-family:'Quicksand'; text-align:left; color: var(--pink);">My Cutieeeee Ariyana üåπ‚ú®,</h1>
            <p id="typewriter-text" style="line-height:1.5; font-size:0.9rem;"></p>
            <p style="text-align: right; margin-top: 30px; font-weight: bold; color: var(--pink);">- Cutiee</p>
        </div>
    </div>

    <script>
        gsap.registerPlugin(Draggable);

        // --- HAPTICS ---
        function vibrate(pattern) {
            if (navigator.vibrate) navigator.vibrate(pattern);
        }

        // --- EXPLOSION ---
        function explode(x, y, color) {
            for (let i = 0; i < 8; i++) {
                const p = document.createElement('div');
                p.classList.add('particle');
                p.style.backgroundColor = color;
                p.style.left = x + 'px';
                p.style.top = y + 'px';
                document.body.appendChild(p);
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 60 + 20;
                
                gsap.to(p, {
                    x: Math.cos(angle) * velocity,
                    y: Math.sin(angle) * velocity,
                    opacity: 0, scale: 0, duration: 0.8,
                    onComplete: () => p.remove()
                });
            }
        }

        // --- NAV ---
        function nextPage(num) {
            gsap.to(".page.active", { opacity: 0, scale: 0.9, duration: 0.5, onComplete: () => {
                document.querySelector(".page.active").classList.remove("active");
                const next = document.getElementById(`page${num}`);
                next.classList.add("active");
                gsap.fromTo(next, { opacity: 0, scale: 1.1 }, { opacity: 1, scale: 1, duration: 0.5 });
                
                if(num === 2) initPage2();
                if(num === 3) initPage3();
                if(num === 4) initPage4();
            }});
        }

        // --- PAGE 1 ---
        const page1 = document.getElementById('page1');
        let popped = 0;
        for(let i=0; i<7; i++) {
            const b = document.createElement('div');
            b.classList.add('bubble');
            const size = Math.random() * 40 + 60;
            b.style.width = size + 'px'; b.style.height = size + 'px';
            b.style.left = Math.random() * 70 + 10 + '%';
            b.style.top = Math.random() * 50 + 20 + '%';
            
            gsap.to(b, {
                y: -20, duration: 2 + Math.random(),
                yoyo: true, repeat: -1, ease: "sine.inOut"
            });

            b.addEventListener('touchstart', (e) => {
                e.preventDefault(); vibrate(50);
                const touch = e.touches[0];
                explode(touch.clientX, touch.clientY, "#bdb2ff");
                gsap.to(b, { scale: 1.5, opacity: 0, duration: 0.1, onComplete: () => b.remove() });
                popped++;
                if(popped === 7) {
                    const btn = document.getElementById('enter-btn');
                    btn.style.display = "block";
                    gsap.from(btn, {scale:0, ease:"elastic.out(1,0.5)", duration:1});
                    vibrate([50, 50, 50]);
                }
            });
            
            // Mouse support
            b.addEventListener('click', (e) => {
                explode(e.clientX, e.clientY, "#bdb2ff");
                b.remove();
                popped++;
                if(popped === 7) document.getElementById('enter-btn').style.display = "block";
            });

            page1.appendChild(b);
        }

        // --- PAGE 2 ---
        function initPage2() {
            const garden = document.getElementById('garden');
            if(garden.children.length > 0) return;

            let bloomed = 0;
            for(let i=0; i<9; i++) {
                const f = document.createElement('div');
                f.classList.add('flower');
                garden.appendChild(f);
            }

            garden.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const target = document.elementFromPoint(touch.clientX, touch.clientY);
                
                if (target && target.classList.contains('flower') && !target.classList.contains('bloomed')) {
                    target.classList.add('bloomed');
                    vibrate(20);
                    const rect = target.getBoundingClientRect();
                    explode(rect.left + rect.width/2, rect.top + rect.height/2, "#caffbf");
                    bloomed++;
                    if(bloomed === 9) setTimeout(() => nextPage(3), 500);
                }
            });
            
            // Mouse support
            const flowers = document.querySelectorAll('.flower');
            flowers.forEach(f => {
                f.addEventListener('mouseenter', () => {
                    if(!f.classList.contains('bloomed')) {
                        f.classList.add('bloomed');
                        bloomed++;
                        if(bloomed === 9) setTimeout(() => nextPage(3), 500);
                    }
                });
            });
        }

        // --- PAGE 3 ---
        function initPage3() {
            Draggable.create("#key", {
                type: "x,y",
                bounds: ".lock-container",
                onDragStart: () => vibrate(30),
                onDragEnd: function() {
                    if (this.hitTest(".target-heart", "40%")) {
                        vibrate([100, 50, 200]);
                        gsap.to(this.target, {scale:0, duration:0.3});
                        gsap.to(".target-heart", {
                            scale: 20, opacity:1, duration:1.5, ease:"power2.inOut",
                            onComplete: () => nextPage(4)
                        });
                        const rect = document.querySelector('.lock-container').getBoundingClientRect();
                        explode(rect.left + rect.width/2, rect.top + rect.height/2, "#ff8fa3");
                    } else {
                        gsap.to(this.target, {x:0, y:0, duration:0.5, ease:"elastic.out(1,0.5)"});
                        vibrate(50);
                    }
                }
            });
        }

        // --- PAGE 4: THE MESSAGE ---
        function initPage4() {
            gsap.to("#letter", { y: 0, opacity: 1, duration: 1, ease:"back.out(1.7)" });
            
            // YOUR UPDATED MESSAGE
            const msg = "I have to be honest with you when you first told me how you felt, my heart skipped a beat, but my mind played tricks on me. I actually thought you were just kidding or pulling my leg because it felt too good to be true.\n\nBut now that I‚Äôve let it sink in and I see the sincerity in your eyes and the pure intention in your heart to spend this lifetime with me, I want to tell you this loud and clear:\n\nI accept üíçüíñ.\n\nI accept your love, your heart, and the beautiful future we are going to build together üè°‚ôæÔ∏è.\n\nPlease know that I am not just here for the good times or the fleeting moments. I am that guy who is going to stand by you through every storm and every sunshine, right until the very end.\n\nMy love for you goes so far beyond anything material or worldly üåç. I don't care about expensive things or flashy gifts, all I care about is us, our bond, and the peace I feel when I'm with you üíû.\n\nYou are my person, my soulmate, and my forever, and I promise to love you unconditionally every single day üíó.\n\nLet‚Äôs start this forever journey together, hand in hand.\n\nI love you endlessly üíãüíó";
            
            const target = document.getElementById('typewriter-text');
            target.innerHTML = "";
            let i = 0;
            
            function type() {
                if (i < msg.length) {
                    if (msg.charAt(i) === "\n") {
                        target.innerHTML += "<br>";
                    } else {
                        target.innerHTML += msg.charAt(i);
                    }
                    i++;
                    vibrate(5); // Tiny tick
                    setTimeout(type, 30); // Speed set to 30ms for faster reading
                } else {
                    startHeartRain();
                }
            }
            setTimeout(type, 1000);
        }

        // --- FINALE ---
        function startHeartRain() {
            setInterval(() => {
                const h = document.createElement('div');
                h.classList.add('rain-heart');
                h.innerHTML = '‚ù§';
                h.style.left = Math.random() * 100 + '%';
                h.style.fontSize = Math.random() * 20 + 15 + 'px';
                h.style.opacity = Math.random();
                document.body.appendChild(h);

                gsap.to(h, {
                    y: window.innerHeight + 50,
                    rotation: Math.random() * 360,
                    duration: Math.random() * 2 + 3,
                    ease: "linear",
                    onComplete: () => h.remove()
                });
            }, 200);
        }
    </script>
</body>
</html>
